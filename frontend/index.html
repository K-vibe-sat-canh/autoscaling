<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÄ AutoScaling Command Center</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- HEADER -->
    <header class="header">
        <div class="header-content">
            <h1>üöÄ AutoScaling Command Center</h1>
            <p>H·ªá th·ªëng d·ª± b√°o l∆∞u l∆∞·ª£ng v√† t·ª± ƒë·ªông ƒëi·ªÅu ch·ªânh server - NASA Log Data</p>
        </div>
        <div class="status-badge" id="apiStatus">
            <span class="status-dot"></span>
            <span class="status-text">Checking...</span>
        </div>
    </header>

    <!-- MAIN CONTENT -->
    <main class="container">
        <!-- CONTROL PANEL -->
        <section class="control-panel">
            <h2>‚öôÔ∏è Control Panel</h2>
            <div class="controls">
                <div class="control-group">
                    <label>S·ªë kho·∫£ng 15 ph√∫t d·ª± b√°o:</label>
                    <input type="range" id="forecastSteps" min="1" max="24" value="8">
                    <span id="forecastStepsValue">8</span>
                </div>
                <div class="control-group">
                    <label>S·ªë server hi·ªán t·∫°i:</label>
                    <input type="number" id="currentServers" min="1" max="20" value="2">
                </div>
                <div class="control-group">
                    <label>Gi·ªù m√¥ ph·ªèng chi ph√≠:</label>
                    <select id="simHours">
                        <option value="6">6 gi·ªù</option>
                        <option value="12">12 gi·ªù</option>
                        <option value="24" selected>24 gi·ªù (1 ng√†y)</option>
                        <option value="48">48 gi·ªù (2 ng√†y)</option>
                        <option value="168">168 gi·ªù (1 tu·∫ßn)</option>
                    </select>
                </div>
            </div>
        </section>

        <!-- TAB NAVIGATION -->
        <div class="tabs">
            <button class="tab-btn active" data-tab="forecast">üìà D·ª± B√°o & Scaling</button>
            <button class="tab-btn" data-tab="cost">üí∞ Ph√¢n T√≠ch Chi Ph√≠</button>
            <button class="tab-btn" data-tab="metrics">üìä System Metrics</button>
        </div>

        <!-- TAB 1: FORECAST -->
        <section id="forecast" class="tab-content active">
            <h2>üîÆ D·ª± B√°o L∆∞u L∆∞·ª£ng</h2>
            <button class="btn-primary" onclick="runForecast()">üöÄ Ch·∫°y D·ª± B√°o</button>
            
            <div id="forecastResult" class="result-section hidden">
                <div class="metrics-row">
                    <div class="metric-card">
                        <span class="metric-label">ü§ñ Model</span>
                        <span class="metric-value" id="modelName">-</span>
                    </div>
                    <div class="metric-card">
                        <span class="metric-label">üìä RMSE</span>
                        <span class="metric-value" id="modelRmse">-</span>
                    </div>
                    <div class="metric-card">
                        <span class="metric-label">üìâ MAPE</span>
                        <span class="metric-value" id="modelMape">-</span>
                    </div>
                    <div class="metric-card">
                        <span class="metric-label">üîÆ Predictions</span>
                        <span class="metric-value" id="predCount">-</span>
                    </div>
                </div>
                
                <div class="chart-container">
                    <canvas id="forecastChart"></canvas>
                </div>
                
                <!-- SCALING RECOMMENDATION -->
                <h3>‚ö° Khuy·∫øn Ngh·ªã Scaling</h3>
                <div class="scaling-section">
                    <div id="scalingCard" class="scaling-card maintain">
                        <div class="scaling-icon">‚û°Ô∏è</div>
                        <div class="scaling-action">MAINTAIN</div>
                        <div class="scaling-reason">Ch∆∞a c√≥ d·ªØ li·ªáu</div>
                    </div>
                    <div class="scaling-details">
                        <div class="detail-item">
                            <span>üñ•Ô∏è Target Servers</span>
                            <strong id="targetServers">-</strong>
                        </div>
                        <div class="detail-item">
                            <span>üíµ Chi ph√≠/gi·ªù</span>
                            <strong id="costHourly">-</strong>
                        </div>
                        <div class="detail-item">
                            <span>üìÖ Chi ph√≠/th√°ng</span>
                            <strong id="costMonthly">-</strong>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- TAB 2: COST ANALYSIS -->
        <section id="cost" class="tab-content hidden">
            <h2>üí∞ Ph√¢n T√≠ch Chi Ph√≠ - ƒêI·ªÇM C·ªòNG</h2>
            <p class="subtitle">So s√°nh <strong>Static Deployment</strong> (10 servers c·ªë ƒë·ªãnh) vs <strong>AutoScaling</strong> (ƒë·ªông)</p>
            
            <button class="btn-primary" onclick="runCostReport()">üìä T·∫°o B√°o C√°o Chi Ph√≠</button>
            
            <div id="costResult" class="result-section hidden">
                <div class="cost-comparison">
                    <div class="cost-card static">
                        <h4>‚ùå Static Deployment</h4>
                        <div class="cost-value" id="staticCost">$0.00</div>
                        <p><span id="staticServers">10</span> servers c·ªë ƒë·ªãnh</p>
                        <small id="staticHourly">$0.00/hour</small>
                    </div>
                    <div class="cost-card auto">
                        <h4>‚úÖ AutoScaling</h4>
                        <div class="cost-value" id="autoCost">$0.00</div>
                        <p>Trung b√¨nh <span id="avgServers">0</span> servers</p>
                        <small>T·ª± ƒë·ªông ƒëi·ªÅu ch·ªânh</small>
                    </div>
                    <div class="cost-card savings">
                        <h4>üíµ TI·∫æT KI·ªÜM</h4>
                        <div class="cost-value" id="savingsAmount">$0.00</div>
                        <p class="savings-percent" id="savingsPercent">0%</p>
                        <small>üìÖ <span id="savingsMonthly">$0.00</span>/th√°ng</small>
                    </div>
                </div>
                
                <div class="conclusion-box">
                    <h4>üìã K·∫øt Lu·∫≠n cho Gi√°m Kh·∫£o</h4>
                    <p id="conclusionText">-</p>
                </div>
                
                <div class="stats-row">
                    <div class="stat-item">
                        <span>üìä Data points analyzed:</span>
                        <strong id="dataPoints">-</strong>
                    </div>
                    <div class="stat-item">
                        <span>üîÑ Total scaling events:</span>
                        <strong id="scalingEvents">-</strong>
                    </div>
                </div>
                
                <h3>üìà Scaling Events Timeline</h3>
                <div class="chart-container">
                    <canvas id="scalingChart"></canvas>
                </div>
                
                <details class="events-details">
                    <summary>üìã Chi ti·∫øt scaling events</summary>
                    <table id="eventsTable">
                        <thead>
                            <tr>
                                <th>Timestamp</th>
                                <th>Action</th>
                                <th>From</th>
                                <th>To</th>
                                <th>Load</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </details>
            </div>
        </section>

        <!-- TAB 3: METRICS -->
        <section id="metrics" class="tab-content hidden">
            <h2>üìä System Metrics</h2>
            <button class="btn-primary" onclick="loadMetrics()">üîÑ Refresh Metrics</button>
            
            <div id="metricsResult" class="result-section">
                <div class="metrics-row">
                    <div class="metric-card large">
                        <span class="metric-label">üìà Current Load</span>
                        <span class="metric-value" id="currentLoad">- req/min</span>
                    </div>
                    <div class="metric-card large">
                        <span class="metric-label">üñ•Ô∏è Running Servers</span>
                        <span class="metric-value" id="runningServers">-</span>
                    </div>
                    <div class="metric-card large">
                        <span class="metric-label">üíµ 24h Cost</span>
                        <span class="metric-value" id="cost24h">$-</span>
                    </div>
                </div>
                
                <h3>ü§ñ Model Performance</h3>
                <div class="metrics-row">
                    <div class="metric-card">
                        <span class="metric-label">RMSE</span>
                        <span class="metric-value" id="metricsRmse">-</span>
                    </div>
                    <div class="metric-card">
                        <span class="metric-label">MAE</span>
                        <span class="metric-value" id="metricsMae">-</span>
                    </div>
                    <div class="metric-card">
                        <span class="metric-label">MAPE</span>
                        <span class="metric-value" id="metricsMape">-</span>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- FOOTER -->
    <footer class="footer">
        <p>üöÄ <strong>AutoScaling NASA Log System</strong> - AI-Powered Server Scaling</p>
        <p>Built with FastAPI + Vanilla JS + Chart.js | Data: NASA HTTP Logs 1995</p>
        <p><a href="http://localhost:8000/docs" target="_blank">üìö API Documentation (Swagger)</a></p>
    </footer>

    <script src="app.js"></script>
</body>
</html>
